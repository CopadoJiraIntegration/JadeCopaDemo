/*!
 * 
 * File: postMessageBridge.js
 * Generated on: 7/30/2020, 3:49:34 PM
 * 
 * NOTE: This file is automatically generated from Typescript. The original source code is located in "js-apps/CtiScriptEditor" folder.
 * 			
 */
!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.postMessageBridge=e():n.postMessageBridge=e()}(window,(function(){return function(n){var e={};function t(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=n,t.c=e,t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:r})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var o in n)t.d(r,o,function(e){return n[e]}.bind(null,o));return r},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=1)}([,function(n,e,t){"use strict";t.r(e),t.d(e,"bindParent",(function(){return i})),t.d(e,"unbindParent",(function(){return u})),t.d(e,"bindChild",(function(){return f})),t.d(e,"unbindChild",(function(){return a})),t.d(e,"addMessageHandler",(function(){return d})),t.d(e,"removeMessageHandler",(function(){return c})),t.d(e,"sendMessage",(function(){return s})),t.d(e,"waitForChild",(function(){return l})),t.d(e,"notifyParent",(function(){return p})),t.d(e,"bridge",(function(){return h}));var r=[],o=null;function i(n){if(!n)throw new Error("iframe element is not found.");o=n,window.addEventListener("message",g)}function u(){o=null,window.removeEventListener("message",g)}function f(){window.addEventListener("message",b)}function a(){window.removeEventListener("message",b)}function d(n){c(n),r.push(n)}function c(n){r=r.filter((function(e){return e!==n}))}function s(n){y(n),M(n)}function l(n){return void 0===n&&(n=""),n?"string"!=typeof n?(i(o=n),v()):new Promise((function(e,t){var r=setInterval((function(){(o=document.querySelector(n))?(clearInterval(r),i(o),v().then(e).catch(t)):o||t("Element is not in the DOM.")}),100)})):v()}function p(){d((function(n){"SYN"===n.name&&y({name:"ACK"})}))}function v(){return new Promise((function(n){var e=setInterval((function(){d((function(t){"ACK"===t.name&&(clearInterval(e),n())})),M({name:"SYN"})}),100)}))}function m(){return window.parent===window?null:window.parent}var g=function(n){var e=o?o.contentWindow:null;e&&w(e,n)},b=function(n){var e=m();e&&w(e,n)};function w(n,e){e.source===n&&e.data&&r.forEach((function(n){return n(JSON.parse(e.data))}))}function y(n){if(m()){var e=JSON.stringify(n),t=m();t&&t.postMessage(e,"*")}}function M(n){if(o){var e=JSON.stringify(n),t=o.contentWindow;t&&t.postMessage(e,"*")}}var h={bindParent:i,unbindParent:u,bindChild:f,unbindChild:a,addMessageHandler:d,removeMessageHandler:c,sendMessage:s,waitForChild:l,notifyParent:p};e.default=h}])}));